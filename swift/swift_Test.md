# Swift Test

## SUT - System (Subject) Under Test
<p align="justify">–í—Å–µ –Ω–∞—à–∏ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å:</p>
<p align="justify"><font>‚úîÔ∏è </font>–ë—ã—Ç—å –∞—Ç–æ–º–∞—Ä–Ω—ã–º–∏.</p>
<p align="justify"><font>‚úîÔ∏è </font>–ë—ã—Ç—å –¥–æ—Å—Ç–æ–≤–µ—Ä–Ω—ã–º–∏.</p>
<p align="justify"><font>‚úîÔ∏è </font>–ù–µ –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç –æ–∫—Ä—É–∂–µ–Ω–∏—è.</p>
<p align="justify"><font>‚úîÔ∏è </font>–õ–µ–≥–∫–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è.</p>
<p align="justify"><font>‚úîÔ∏è </font>–õ–µ–≥–∫–æ —á–∏—Ç–∞—Ç—å—Å—è.</p>
<p align="justify"><font>‚úîÔ∏è </font>–°–æ–±–ª—é–¥–∞—Ç—å –µ–¥–∏–Ω—É—é –∫–æ–Ω–≤–µ–Ω—Ü–∏—é –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è.</p>
<p align="justify"><font>‚úîÔ∏è </font>–ó–∞–ø—É—Å–∫–∞—Ç—å—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ –≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ–∂–∏–º–µ.</p>


## –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
#### func test_login_withValidData_shouldSaveLoggedinStatusOnSuccess()

1. <p align="justify"><b>test</b> - –Ω–∞—á–∞–ª–æ —Ç–µ—Å—Ç–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏.</p>
2. <p align="justify"><b>login</b> - —Ç–µ—Å—Ç–∏—Ä—É–µ–º–∞—è —Ñ—É–Ω–∫—Ü–∏—è.</p>
3. <p align="justify"><b>with ValidData -</b> - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã).</p>
4. <p align="justify"><b>shouldSaveLoggedinStatusOnSuccess</b> - –æ–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∞.</p>

## –û–±—ä—è–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π

```swift
testable import MyModuleUnderTes
```

<p align="justify">–ò–º–ø–æ—Ä—Ç –º–æ–¥—É–ª–µ–π/–ø–æ–¥–º–æ–¥—É–ª–µ–π, –∞ —Ç–∞–∫–∂–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π (<b>class</b> , <b>enum</b>, <b>func</b> , <b>struct</b> , <b>var</b>) –Ω–µ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è.</p>
<p align="justify">–¢–µ—Å—Ç–∏—Ä—É—é—Ç—Å—è –º–æ–¥—É–ª–∏, –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å –ø–æ–º–æ—â—å—é <b>@testable</b> (–ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ –≤ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–∞—Ö).</p>
<p align="justify">–ò–º–ø–æ—Ä—Ç —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–≥–æ –º–æ–¥—É–ª—è —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤.</p>

## Arrange - Act - Assert –ø–∞—Ç—Ç–µ—Ä–Ω
<p align="justify"><b>Arrange (–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)</b> - –≤ —ç—Ç–æ–º –±–ª–æ–∫–µ –∫–æ–¥–∞ –º—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Ç–µ—Å—Ç–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–≥–æ —é–Ω–∏—Ç–∞.</p>
<p align="justify"><b>Act (–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ)</b> - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–ª–∏ –≤—ã–∑–æ–≤ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è.</p>
<p align="justify"><b>Assert (–ø—Ä–æ–≤–µ—Ä–∫–∞)</b> - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–≥–æ, —á—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–π –≤—ã–∑–æ–≤ –≤–µ–¥–µ—Ç —Å–µ–±—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –æ–±—Ä–∞–∑–æ–º.</p>

```swift
// Arrange
let sut = makeSUT()
let taskTypes = TaskType.Inventory.allCases
let notificationSoundName = UNNotificationSoundName(rawValue: "taskNotificationSound.caf")

//Act
let result: [Bool] = taskTypes.map {
	sut.makeNotificationSoundName(taskType: TaskType.inventory($0)) = notificationSoundName
}

//Assert
result.forEach { XCTAssertTrue($0, "–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–≤—É–∫–∞ –∑–∞–¥–∞–Ω–∏—è –¥–ª—è Inventory") }
```

## Given - When - Then –ø–∞—Ç—Ç–µ—Ä–Ω
<p align="justify"><b>Given (–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)</b> - –≤ —ç—Ç–æ–º –±–ª–æ–∫–µ –∫–æ–¥–∞ –º—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Ç–µ—Å—Ç–æ–≤–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–≥–æ –Ω–∏—Ç–∞.</p>
<p align="justify"><b>When (–¥–µ–π—Å—Ç–≤–∏—è)</b> - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–ª–∏ –≤—ã–∑–æ–≤ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è.</p>
<p align="justify"><b>Then (—Ä–µ–∑—É–ª—å—Ç–∞—Ç)</b> - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–≥–æ, —á—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º—ã–π –≤—ã–∑–æ–≤ –≤–µ–¥–µ—Ç —Å–µ–±—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –æ–±—Ä–∞–∑–æ–º.</p>

```swift
func test_loadview_shouldHaveCorrectTitle() {

	// given
	let sut = makesUT()

	// when 
	sut.loadViewIfNeeded)

	// Then
	XCTAssertEqual(
		sut.title,
		L10n.SearchViewController.title,
		"—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–µ–≤–µ—Ä–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫"
	)
}
```

## TDD
<p align="justify">–≠—Ç–æ –ø–æ–¥—Ö–æ–¥ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ—Å—Ç–æ–≤  .</p>
<p align="justify">‚ùå –°–Ω–∞—á–∞–ª–∞ –≤—ã –ø–∏—à–∏—Ç–µ —Ç–µ—Å—Ç.</p>
<p align="justify">‚úÖ –ü–∏—à–∏—Ç–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –∫–æ–¥ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Ç–µ—Å—Ç –±—ã–ª –ø—Ä–æ–π–¥–µ–Ω.</p>
<p align="justify">üÜó –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –µ—Å—Ç—å –ª–∏ –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å.</p>


## Unit Testing
<p align="justify">–ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–∑ —Å–µ–±—è —Ç–µ—Å—Ç–æ–≤—ã–π –º–µ—Ç–æ–¥ —Å–æ–∑–¥–∞–Ω–Ω—ã–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞–∫–æ–≥–æ —Ç–æ –¥–µ–π—Å—Ç–≤–∏—è, –≤—ã–ø–æ–ª–Ω—è–µ–º–æ–≥–æ –¥—Ä—É–≥–∏–º –º–µ—Ç–æ–¥–æ–º.</p>
<p align="justify"><b>Fast</b> - —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –±—ã—Å—Ç—Ä–æ  .</p>
<p align="justify"><b>Independent/Isolated</b> - —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã –∏ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞.</p>
<p align="justify"><b>Repeatable</b> - —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –≤—ã–¥–∞–≤–∞—Ç—å –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ.</p>
<p align="justify"><b>Self-validating</b> - —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω—ã. –†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ª–∏–±–æ —É—Å–ø–µ—à–Ω—ã–º –ª–∏–±–æ –ø—Ä–æ–≤–∞–ª—å–Ω—ã–º  .</p>
<p align="justify"><b>Timely</b> - –≤ –∏–¥–µ–∞–ª–µ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞–ø–∏—Å–∞–Ω—ã –¥–æ –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–≥–æ –ø—Ä–æ–¥–∞–∫—à–Ω –∫–æ–¥–∞ (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ—Å—Ç–æ–≤: TDD) .</p>


## Integration Tests
<p align="justify">–ü—Ä–æ—Ü–µ—Å—Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–≤—è–∑–µ–π –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –º–æ–¥—É–ª—è–º–∏ –ø—Ä–æ–µ–∫—Ç–∞.</p>

## Performance Tests
<p align="justify">–¢–µ—Å—Ç—ã –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –ø–æ–∑–≤–æ–ª—è—é—Ç –∑–∞–º–µ—Ä—è—Ç—å –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤.</p>

## UI Testing
<p align="justify">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤.</p>

## Test Doubles

### Stub
a. **Stub**
<p align="justify">–≠—Ç–æ –∑–∞–≥–ª—É—à–∫–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –≥–æ—Ç–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤—ã–∑–æ–≤—ã.</p>
<p align="justify">–°—Ç–∞–±—ã –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è –≤—Ö–æ–¥—è—â–∏—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π (–∑–∞–ø—Ä–æ—Å–æ–≤) - –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –æ—Å—Ç–∞–≤–ª—è—é—Ç –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.</p>

```swift
enum TaskStub {

	static var doingTask = Task {
		id: "20230101",
		code: "0049566-03",
		content: "",
		createTime: "2023-01-01701:01:01.000Z",
		operationDate: Date()
	)
}
```

b. **Dummy**
<p align="justify">–ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –Ω–∏ –∫–∞–∫–æ–π –ª–æ–≥–∏–∫–∏! –û–±—ã—á–Ω–æ –æ–Ω–∏ –Ω—É–∂–Ω—ã –ø—Ä–æ—Å—Ç–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Å–ø–∏—Å–∫–æ–≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞..</p>

```swift
class IdentificationMarkServiceDummy: IdentificationMarkService {
	func gettinDataAndWare(from datamatrix: BarcodeModel) -> IdentificationMarkDataModel? {
		nil
	}
	
	func getMarkData(ware: WareInfoModel, completion: @escaping ((IdentificationMarkPrintModel?) -> Void)) {
	}
	
	func checkBarcode(barcode: BarcodeModel, playSound: @escaping ((SoundMelody) -> Void), completion: @escaping (Result<(ware: WareInfoModel?, status: IdentificationMarkService.StickerStatus), IdentificationMarkService.ServiceError>) -> Void) {
	}
	
	func processStatus(ware: WareInfoModel, status: IdentificationMarkService.StickerStatus, completion: @escaping ((Bool) -> Void)) {
	}
```

c. **Fake**
<p align="justify">–§–∞–ª—å—à–∏–≤—ã–µ –æ–±—å–µ–∫—Ç—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ —É–ø—Ä–æ—â–µ–Ω–Ω—É—é –ª–æ–≥–∏–∫—É, –Ω–µ –≥–æ–¥–Ω—É—é –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞.</p>

```swift
class HardwareHandlerFake: IHardwareScanHandler {

	var resultBarcode: Barcode?
	var isConnected = false

	func connect() {
		isConnected = true
	}
	
	func connected() {
	isConnected = true
	}
	
	func disconnected(){
	isConnected = false
	}
	
	func hardwareScanned(barcode: String?, type: BarcodeType) {
		resultBarcode: Barcode(code: barcode, type: type)
	}
}
```

### Mock
a. **Mock**
<p align="justify"><b>Mock</b> - –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂ –Ω–∞ <b>Stub</b>, –Ω–æ –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏, –∞ –Ω–µ –Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–∏.</p>
<p align="justify">–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—ã –Ω–µ –æ–∂–∏–¥–∞–µ—Ç–µ, —á—Ç–æ <b>–ú–æ—Å–∫</b> –≤–µ—Ä–Ω–µ—Ç –∫–∞–∫–æ–µ-—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ, –Ω–æ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç–µ, —á—Ç–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤—ã–∑–æ–≤–æ–≤ –º–µ—Ç–æ–¥–æ–≤.</p>
<p align="justify">–ú–æ–∫–∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è –∏—Å—Ö–æ–¥—è—â–∏—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π (–∫–æ–º–∞–Ω–¥) - –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –æ—Å—Ç–∞–≤–ª—è—é—Ç –ø–æ–±–æ—á–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.</p>

b. **Spy**
<p align="justify">–≠—Ç–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –≤—ã–∑–æ–≤—ã —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞, –ø–æ–∑–≤–æ–ª—è—è –≤–∞–º –ø—Ä–æ–≤–µ—Ä—è—Ç—å –≤—ã–∑–æ–≤—ã –±–µ–∑ –∑–∞–º–µ–Ω—ã –≤—Å–µ–≥–æ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –æ–±—å–µ–∫—Ç–∞.</p>

```swift
class UITableViewSpy: UITableView {
	var deselectRowCalled = false
	var cellReuseIdentifier: String!
	override func deselectRow(at indexPath: IndexPath, animated: Bool) {
		deselectRowCalled = true
		super.deselectRow(at: indexPath, animated: animated)
	}
}
```

```swift
func test_didSelectRowAt_callsDeselectRow() {
	let sut = makesUT()
	let tableView = makeTableViewMock(dataSourceAndDelegate: sut)
	
	sut.tableView(tableView, didSelectRowAt: IndexPath(row: 0, section: 0))
	XCTAssert (tableView.deselectRowCalled, "deselectRow –Ω–µ –±—ã–ª –≤—ã–∑–≤–∞–Ω")
}
```

```swift
func makeTableViewMock(
dataSourceAndDelegate: UITableViewDataSource & UITableViewDelegate) -> UITableViewSpy {
	let tableView = UITableViewSpy()
	tableView.frame = CGRect(x: 0, y: 0, width: 500, height: 500)
	tableView.dataSource = datasourceAndDelegate
	tableView.delegate = dataSourceAndDelegate
	tableView.register(
		WareDescriptionTableViewCellMock.self,
		forCellReuseIdentifier: makeCellReuseIdentifier()
	)
	tableView. register(
	TaskSectionViewMock.self,
	forHeaderFooterViewReuseIdentifier: makeHeaderFooterReuseIdentifier()
	)
	tableView.cellReuseIdentifier = makeCellReuseIdentifier()
	return tableView
}
```

## Mocks vs Stubs
### Mock [mock, spy]
* Mock - —ç—Ç–æ –ø—Ä–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ.
* –ú–æ—Å–∫ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å –ö–∞–∫ –¥–æ—Å—Ç–∏–≥–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞?
* Mock –º–æ–∂–µ—Ç –ø—Ä–æ–≤–∞–ª–∏—Ç—å —Ç–µ—Å—Ç.

### Stub [stub, dummy, fake]
* Stub - —ç—Ç–æ –ø—Ä–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ.
* Stub –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å: –ö–∞–∫–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç?
* Stub –Ω–µ –ø—Ä–æ–≤–∞–ª–∏–≤–∞—é—Ç –≤–∞—à–∏ —Ç–µ—Å—Ç—ã.

<p align="justify">–ù–µ–ª—å–∑—è –º–æ–∫–∞—Ç—å —Å–∞–º—É —Ç–µ—Å—Ç–∏—Ä—É–µ–º—É—é —Å–∏—Å—Ç–µ–º—É (SUT), —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω–æ.</p>

## –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Ç–µ—Å—Ç–æ–≤

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Ç–µ—Å—Ç–æ–≤ —Å–æ Stub
- Setup - –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–±—å–µ–∫—Ç–∞ SUT –∏ –µ–≥–æ Stub.
- Exercise - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.
- Verify state - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞.
- Teardown - –æ—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤.

```swift
func test_saveAndRestoreTask_taskShouldBeRestored() {
	let content = StoredTaskContent(id: "ID", content: Data())
	
	sut.saveTaskContent(coltent)
	let restoredTaskContent = sut.restoreTaskContent(forTaskID: "ID0")

	XCTAssertNotNil(restoredTaskContent, "–û—à–∏–±–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è.")
	XCTAssertEqual (content, restoredTaskContent, "–î–∞–Ω–Ω—ã–µ –≤ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–º –∑–∞–¥–∞–Ω–∏–∏ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –æ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö.")
}
```

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Ç–µ—Å—Ç–æ–≤ —Å Mock
- Setup - –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–±—ä–µ–∫—Ç–∞ SUT.
- **Setup expectations - –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∂–∏–¥–∞–Ω–∏–π –≤ –ú–æ—Å–∫.**
- Exercise - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.
- **Verify expectations - –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –≤ –ú–æ—Å–∫ –±—ã–ª–∏ –≤—ã–∑–≤–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã.**
- Verify state - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞.
- Teardown - –æ—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤.

```swift
func testAddPortion) throws {
	let sut - getManager (withResponseBody: String?.none)
	let completionExpectation = expectation (description: "–û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞")
	let completion = { (result: Result‚ÄπVoid, IPCClientError>) in
		do {
		try result.get()
		} catch
		XCTFail("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç–∞")
		completionExpectation.fulfill()
	}
	try sut.addPortion(
		for: "ware",
		portionId: 123,
		LineCount: 1,
		size: 1,
		completion: completion
	)
	waitforExpectations(timeout: 10)
}
```